<div class="row p-2 m-0">
  <div class="col-4 card justify-content-center p-0 m-0">
    <div
      class=""
      [ngClass]="
        toggle
          ? 'card-header bg-success text-white'
          : 'card-header bg-info text-white'
      "
    >
      <h1>Registration form</h1>
    </div>
    <div class="card-body">
      <form class="justify-content-center" #formdemo="ngForm">
        <div class="form-group">
          <label class="h5" for="firstName">First Name</label>
          <input
            type="text"
            id="firstName"
            class="form-control"
            [(ngModel)]="userData.firstName"
            name="firstName"
            #firstName="ngModel"
            required
          />
          <span
            class="help-block text-danger"
            *ngIf="
              (firstName.invalid && firstName.touched) ||
              (submitted && !firstName.dirty)
            "
            >Please Enter a First Name!</span
          >
        </div>

        <div class="form-group">
          <label class="h5" for="username">Last Name</label>
          <input
            type="text"
            id="lastName"
            class="form-control"
            [(ngModel)]="userData.lastName"
            name="lastName"
            #lastName="ngModel"
            required
          />
          <span
            class="help-block text-danger"
            *ngIf="
              (lastName.invalid && lastName.touched) ||
              (submitted && !lastName.dirty)
            "
            >Please Enter a Last Name!</span
          >
        </div>

        <div class="form-group">
          <label class="h5" for="email">Mail</label>
          <input
            type="email"
            id="email"
            class="form-control"
            [(ngModel)]="userData.email"
            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
            name="email"
            required
            #email="ngModel"
          />
          <span
            class="help-block text-danger"
            *ngIf="
              (email.invalid && email.touched) || (submitted && !email.dirty)
            "
            >Please enter a invalid email!</span
          >
        </div>
        <div class="form-group">
          <label class="h5" for="mobileNo">Phone no</label>
          <input
            type="text"
            id="mobileNo"
            class="form-control"
            [(ngModel)]="userData.mobileNo"
            name="mobileNo"
            (keypress)="blockCharacter($event)"
            #mobileNo="ngModel"
            maxlength="10"
            minlength="10"
            required
          />
          <span
            class="help-block text-danger"
            *ngIf="
              (mobileNo.invalid && mobileNo.touched) ||
              (submitted && !mobileNo.dirty)
            "
            >Please enter a invalid Mobile No!</span
          >
        </div>

        <div class="form-group mb-3 mt-3">
          <div class="row">
            <div class="col-lg-4 m-0">
              <label class="h5"> Gender </label>
            </div>
            <div class="radio col-lg-4 m-0 p-0" *ngFor="let gender of genders">
              <input
                type="radio"
                name="gender"
                [id]="gender"
                [(ngModel)]="userData.gender"
                [value]="gender"
                #errors="ngModel"
                required
              />
              <label class="h5" class="ms-2" [for]="gender">{{ gender }}</label>
              <br />
              <small
                class="help-block text-danger"
                *ngIf="
                  (errors.invalid && errors.touched) ||
                  (submitted && !errors.dirty)
                "
                >Please Select Gender!</small
              >
            </div>
          </div>
        </div>
        <div class="form-group mb-3 mt-3">
          <div class="row" ngModelGroup="hobbies" #hobbies="ngModelGroup">
            <div class="col-lg-4 m-0">
              <label class="h5"> hobbies </label>
            </div>
            <!-- <span *ngFor="let hobby of hobbies; let j = index">
              <input
                [name]="hobby.label"
                [value]="hobby.id"
                [(ngModel)]="userData.hobby"
                type="checkbox"
              />
              {{ hobby.label }}
            </span> -->
            <div class="form-check">
              <input class="form-check-input" type="checkbox"  id="flexCheckDefault" (change)="onChangeData($event)" value="Drawing"  name="hobbies" ngModel>
              <label class="form-check-label" for="flexCheckDefault">
                Drawing
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="flexCheckChecked" (change)="onChangeData($event)" value="Drawing" name="hobbies" ngModel>
              <label class="form-check-label" for="flexCheckChecked">
                Tracking
              </label>
            </div>
            <!-- <div class="check col-lg-2 m-0 p-0" *ngFor="let hobby of hobbies">
              <input
                type="checkbox"
                name=""
                [id]="hobby"
                [(ngModel)]="userData.hobby"
                [value]="hobby"
                #hobby="ngModel"
                required
              />
              <label class="h5" class="ms-2" [for]="hobby">{{ hobby }}</label> -->
            <br />
            <!-- <small
                class="help-block text-danger"
                *ngIf="
                  (hobby.invalid && hobby.touched) ||
                  (submitted && !hobby.dirty)
                "
                >Please Select Gender!</small
              > -->
            <!-- </div> -->
          </div>
        </div>
        <div ngModelGroup="address" #address="ngModelGroup">
          <div class="form-group">
            <label class="h5">Country</label>
            <select
              class="form-select"
              name="country"
              [(ngModel)]="userData.address.country"
              #country="ngModel"
            >
              <option selected>Select Country</option>
              <option *ngFor="let country of countries" [value]="country">
                {{ country }}
              </option>
            </select>
            <small
              class="help-block text-danger"
              *ngIf="
                (country.invalid && country.touched) ||
                (submitted && !country.dirty)
              "
              >Please Select Country Feild!</small
            >
          </div>
          <div class="form-group">
            <label class="h5">State</label>
            <select
              class="form-select"
              name="state"
              [(ngModel)]="userData.address.state"
              #state="ngModel"
            >
              <option selected>Select State</option>
              <option *ngFor="let state of states" [value]="state">
                {{ state }}
              </option>
            </select>
            <small
              class="help-block text-danger"
              *ngIf="
                (state.invalid && state.touched) || (submitted && !state.dirty)
              "
              >Please Select State Feild!</small
            >
          </div>
          <div class="form-group">
            <label class="h5">City</label>
            <select
              class="form-select"
              name="city"
              [(ngModel)]="userData.address.city"
              #city="ngModel"
            >
              <option selected>Select City</option>
              <option *ngFor="let city of cities" [value]="city">
                {{ city }}
              </option>
            </select>
            <small
              class="help-block text-danger"
              *ngIf="
                (city.invalid && city.touched) || (submitted && !city.dirty)
              "
              >Please Select City Feild!</small
            >
          </div>
        </div>
      </form>
    </div>
    <div class="card-footer">
      <button
        [ngClass]="
          toggle
            ? 'btn btn-success text-white w-100'
            : 'btn btn-info text-white  w-100'
        "
        (click)="onSubmit()"
        type="submit"
      >
        <ng-container *ngIf="toggle; then toggleIn; else toggleOut">
        </ng-container>
        <ng-template #toggleIn> Update </ng-template>
        <ng-template #toggleOut> Submit </ng-template>
      </button>
    </div>
  </div>
  <div class="col-8 justify-content-center mx-auto">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th>Phone No</th>
          <th>Gender</th>
          <th>Hobbies</th>
          <th colspan="3" class="text-center">Address</th>
          <!-- <th>State</th> -->
          <!-- <th>City</th> -->
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of details; let i = index">
          <td>{{ item.firstName }}</td>
          <td>{{ item.lastName }}</td>
          <td>{{ item.email }}</td>
          <td>{{ item.mobileNo }}</td>
          <td>{{ item.gender }}</td>
          <!-- <ng-container *ngFor="let hobb of selectedHobby">
            <td *ngIf="item.hobby">{{ hobb.label }}</td>
          </ng-container> -->
          <td>{{ selectedHobby }}</td>
          <td>{{ item.address.country }}</td>
          <td>{{ item.address.state }}</td>
          <td>{{ item.address.city }}</td>
          <td class="justify-content-center">
            <button
              (click)="handleEdit(item, i)"
              class="btn btn-outline-success"
            >
              Edit
            </button>
            <button
              class="ms-3 btn btn-outline-danger"
              (click)="handleDelete(item.id, i)"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
